if (!String.prototype.supplant) { String.prototype.supplant = function (a) { return this.replace(/{([^{}]*)}/g, function (d, c) { var e = a[c]; return typeof e === "string" || typeof e === "number" ? e : d }) } } $(function () { var k = $.connection.stockTickerMini, a = "S_Up", h = "S_Down", l = "S_UnChanged", f = USGFXPath + "ImagesN/Symbols/up.png", m = USGFXPath + "ImagesN/Symbols/down.png", c = USGFXPath + "ImagesN/Symbols/unchanged.png", e = $("#Usg-Marquee"), j = e.find("#marq"), i = '<li data-symbol="{Symbol}" class="marqContent" style="visibility: hidden"><img src="{SymbolA}"  /><img src="{SymbolB}"  /><img class="StockReplayce" src={Direction}  /><span class="StockReplayce text-nowrap">{Symbol} {Price}/{PPrice}</span></li>', g = '<div class="StockReplayce {Direction}"   ></div>', b = '<span class="StockReplayce2">{Symbol} {Price}/{PPrice}</span>'; function d(o) { return $.extend(o, { SymbolA: USGFXPath + "ImagesN/Symbols/" + o.SymbolA + ".png", SymbolB: USGFXPath + "ImagesN/Symbols/" + o.SymbolB + ".png", Price: o.Price, PercentChange: (o.PercentChange * 100).toFixed(2) + "%", Change: o.Change.toFixed(7), Direction: o.Change === 0 ? l : o.Change >= 0 ? a : h }) } function n() { } k.client.updateStockPrices = function (p) { p.forEach(function o(s) { var r = d(s), q = $(g.supplant(r)); $target = j.find("li[data-symbol=" + s.Symbol + "]"); $target.find("div.StockReplayce").replaceWith(q); q = $(b.supplant(r)); $target.find("span.StockReplayce2").replaceWith(q) }) }; $.connection.hub.start().done(function () { }) });